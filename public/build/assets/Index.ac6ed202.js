import{d as U,u as ne,v as se,r as p,n as f,b as n,c as re,o as y,e as A,f as r,g as t,h as l,j as P,t as c,s as ie,k as I,l as N,i as E,m as F,F as z,p as _,H as de}from"./app.2d2cf3e6.js";import{_ as ce,l as ue}from"./breadcrumbsData.2260b39f.js";const ge={class:"q-mt-md"},pe={class:"full-width row flex-center text-primary q-gutter-sm"},me={class:"text-red"},_e={class:"row flex-center q-gutter-x-sm no-wrap"},be={class:"q-table__title text-primary"},fe={class:"row justify-end"},ve={class:"q-ml-sm"},qe=U({__name:"TagTable",props:{paginatedData:null,sortingData:null},setup(k){const i=k,v=ne(),V=se(()=>(d.value=!1,i.paginatedData.data)),q=p(""),d=p(!1),S=p(!1),u=p([]),C=p(!1),m=p({sortBy:i.sortingData.column,descending:i.sortingData.descending==="true",page:i.paginatedData.current_page,rowsPerPage:i.paginatedData.per_page,rowsNumber:i.paginatedData.total}),R=[{name:"tagTitle",required:!0,label:f("Title"),align:"left",sortable:!0,field:a=>a.title,style:"width: 30%"},{name:"tagContent",required:!0,label:f("Content"),align:"left",sortable:!0,field:a=>a.content},{name:"catActions",required:!0,label:f("Actions"),align:"center",field:"actions"}],j=a=>{d.value=!0;const{page:o,rowsPerPage:h,sortBy:b,descending:g}=a.pagination,w=a.filter;_.Inertia.get("/admin/tags",{per_page:h,page:o,[b]:g?"asc":"desc",column:b,descending:g,search:w}),m.value.page=o,m.value.rowsPerPage=h,m.value.sortBy=b,m.value.descending=g},H=()=>{d.value=!0,S.value=!0,_.Inertia.get("/admin/tags")},L=a=>{let o=a.slug;_.Inertia.get(`/admin/tags/${o}/edit`)},Q=a=>{let o=a.slug;d.value=!0,_.Inertia.delete(`/admin/tags/${o}`,{onSuccess:()=>B(),onError:()=>T()})},T=()=>{v.notify({type:"negative",message:f("Something went wrong with tag(s) deletion")})},B=()=>{v.notify({type:"positive",message:f("The tag(s) have been deleted successfully")})},Y=()=>{_.Inertia.get("/admin/tags/create")},G=a=>u.value.length===0?"":`${u.value.length} record${u.value.length>1?"s":""} selected of ${a}`,J=()=>{_.Inertia.post("/admin/tagmassdelete",{data:u.value.map(a=>a.id)},{onStart:()=>d.value=!0,onFinish:()=>u.value.length=0,onSuccess:()=>B(),onError:()=>T()})};return(a,o)=>{const h=n("q-checkbox"),b=n("q-th"),g=n("q-icon"),w=n("q-tooltip"),s=n("q-btn"),$=n("q-td"),K=n("q-inner-loading"),M=n("q-space"),O=n("q-input"),W=n("q-separator"),X=n("q-tr"),Z=n("q-table"),ee=n("q-avatar"),te=n("q-card-section"),ae=n("q-card-actions"),le=n("q-card"),oe=n("q-dialog"),x=re("close-popup");return y(),A(z,null,[r("div",ge,[t(Z,{title:a.$t("Tags"),"row-key":e=>e.id,columns:R,rows:E(V),pagination:m.value,"onUpdate:pagination":o[2]||(o[2]=e=>m.value=e),filter:q.value,onRequest:j,loading:d.value,color:"primary",selected:u.value,"onUpdate:selected":o[3]||(o[3]=e=>u.value=e),selection:"multiple","selected-rows-label":G,flat:"","binary-state-sort":"","rows-per-page-label":a.$t("Records per page"),"rows-per-page-options":[5,10,15,i.paginatedData.total,0],bordered:""},{"header-selection":l(e=>[t(h,{color:"primary","keep-color":"",modelValue:e.selected,"onUpdate:modelValue":D=>e.selected=D,"data-test":"select-checkbox"},null,8,["modelValue","onUpdate:modelValue"])]),"header-cell":l(e=>[t(b,{props:e,class:"text-primary"},{default:l(()=>[P(c(e.col.label),1)]),_:2},1032,["props"])]),"no-data":l(()=>[r("div",pe,[t(g,{size:"2em",name:"sentiment_dissatisfied",color:"red"}),r("span",me,c(a.$t("No data available")),1)])]),"body-cell-catActions":l(e=>[t($,{props:e,"auto-width":""},{default:l(()=>[r("div",_e,[t(s,{outline:"",color:"accent",icon:"edit",disable:d.value,onClick:D=>L(e.row),"data-test":"edit-button"},{default:l(()=>[t(w,{delay:1e3,anchor:"bottom middle",self:"center middle"},{default:l(()=>[P(c(a.$t("Edit tag")),1)]),_:1})]),_:2},1032,["disable","onClick"]),t(s,{outline:"",color:"red",icon:"delete",disable:d.value,onClick:D=>Q(e.row),"data-test":"delete-button"},{default:l(()=>[t(w,{delay:1e3,anchor:"bottom middle",self:"center middle"},{default:l(()=>[P(c(a.$t("Delete tag")),1)]),_:1})]),_:2},1032,["disable","onClick"])])]),_:2},1032,["props"])]),loading:l(()=>[t(K,{showing:"",color:"accent"})]),"body-cell-catIcon":l(e=>[t($,{props:e,"auto-width":""},{default:l(()=>[r("div",{class:"row rounded-borders flex-center color-box",style:ie({background:e.row.color})},[t(g,{name:e.row.icon,color:"white",size:"md"},null,8,["name"])],4)]),_:2},1032,["props"])]),top:l(()=>[r("div",be,c(a.$t("Tags")),1),t(M),t(O,{"clear-icon":"close",dense:"",debounce:"300","label-color":"primary",modelValue:q.value,"onUpdate:modelValue":o[0]||(o[0]=e=>q.value=e),"label-slot":"","data-test":"search-input"},{append:l(()=>[t(g,{name:"search",color:"primary"})]),label:l(()=>[r("div",null,c(a.$t("Search")),1)]),_:1},8,["modelValue"]),t(s,{class:"q-ml-md",color:"primary",outline:"",disable:d.value,onClick:H,"data-test":"refresh-button",loading:S.value,icon:"restart_alt"},null,8,["disable","loading"]),t(W,{vertical:"",spaced:"",inset:""}),t(s,{color:"green",unelevated:"",onClick:Y,"data-test":"add-button"},{default:l(()=>[t(g,{left:"",name:"post_add"}),r("div",null,c(a.$t("Add tag")),1)]),_:1})]),pagination:l(e=>[e.pagesNumber>2?(y(),I(s,{key:0,icon:"first_page",color:"grey-8",round:"",dense:"",flat:"",disable:e.isFirstPage,onClick:e.firstPage},null,8,["disable","onClick"])):N("",!0),t(s,{icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:e.isFirstPage,onClick:e.prevPage},null,8,["disable","onClick"]),t(s,{icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:e.isLastPage,onClick:e.nextPage},null,8,["disable","onClick"]),e.pagesNumber>2?(y(),I(s,{key:1,icon:"last_page",color:"grey-8",round:"",dense:"",flat:"",disable:e.isLastPage,onClick:e.lastPage},null,8,["disable","onClick"])):N("",!0)]),"bottom-row":l(()=>[t(X,null,{default:l(()=>[t($,{colspan:"100%"},{default:l(()=>[r("div",fe,[t(s,{outline:"",color:"red",disable:d.value||u.value.length==0,onClick:o[1]||(o[1]=e=>C.value=!0),"data-test":"massdelete-button"},{default:l(()=>[r("div",null,c(a.$t("Delete selected")),1)]),_:1},8,["disable"])])]),_:1})]),_:1})]),_:1},8,["title","row-key","rows","pagination","filter","loading","selected","rows-per-page-label","rows-per-page-options"])]),t(oe,{modelValue:C.value,"onUpdate:modelValue":o[4]||(o[4]=e=>C.value=e),persistent:""},{default:l(()=>[t(le,null,{default:l(()=>[t(te,{class:"row items-center bg-red-1"},{default:l(()=>[t(ee,{icon:"front_hand",color:"negative","text-color":"white"}),r("span",ve,c(a.$t("You are going to delete selected tags, aren't you?")),1)]),_:1}),t(ae,{align:"right"},{default:l(()=>[F(t(s,{flat:"",label:a.$t("Cancel"),color:"primary"},null,8,["label"]),[[x]]),F(t(s,{flat:"",label:a.$t("Delete"),color:"negative",onClick:J,"data-test":"massdelete-confirm"},null,8,["label"]),[[x]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),ye=U({__name:"Index",props:{model:null},setup(k){const i=k,v=p(ue);return(V,q)=>(y(),A(z,null,[t(E(de),{title:"Post tags"}),t(ce,{data:v.value},null,8,["data"]),t(qe,{paginatedData:i.model.tags,sortingData:i.model.sorting},null,8,["paginatedData","sortingData"])],64))}});export{ye as default};
