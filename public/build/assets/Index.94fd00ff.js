import{d as U,u as ne,v as se,r as p,n as _,b as n,c as re,o as w,e as A,f as r,g as t,h as o,j as P,t as d,s as ie,k as N,l as T,i as E,m as F,F as z,p as b,H as ce}from"./app.ea05a65f.js";import{_ as de,b as ue}from"./breadcrumbsData.5c06e62c.js";import{_ as ge}from"./_plugin-vue_export-helper.cdc0426e.js";const pe={class:"q-mt-md"},me={class:"full-width row flex-center text-primary q-gutter-sm"},_e={class:"text-red"},be={class:"row flex-center q-gutter-x-sm no-wrap"},fe={class:"q-table__title text-primary"},ve={class:"row justify-end"},ye={class:"q-ml-sm"},qe=U({__name:"CategoryTable",props:{paginatedData:null,sortingData:null},setup(C){const i=C,v=ne(),V=se(()=>(c.value=!1,i.paginatedData.data)),y=p(""),c=p(!1),S=p(!1),u=p([]),k=p(!1),m=p({sortBy:i.sortingData.column,descending:i.sortingData.descending==="true",page:i.paginatedData.current_page,rowsPerPage:i.paginatedData.per_page,rowsNumber:i.paginatedData.total}),R=[{name:"catIcon",required:!0,label:_("Category Icon"),align:"center",sortable:!0,field:a=>a.icon},{name:"catTitle",required:!0,label:_("Title"),align:"left",sortable:!0,field:a=>a.title,style:"width: 30%"},{name:"catContent",required:!0,label:_("Content"),align:"left",sortable:!0,field:a=>a.content},{name:"catActions",required:!0,label:_("Actions"),align:"center",field:"actions"}],j=a=>{c.value=!0;const{page:l,rowsPerPage:q,sortBy:f,descending:g}=a.pagination,h=a.filter;b.Inertia.get("/admin/categories",{per_page:q,page:l,[f]:g?"asc":"desc",column:f,descending:g,search:h}),m.value.page=l,m.value.rowsPerPage=q,m.value.sortBy=f,m.value.descending=g},H=()=>{c.value=!0,S.value=!0,b.Inertia.get("/admin/categories")},L=a=>{let l=a.slug;b.Inertia.get(`/admin/categories/${l}/edit`)},Q=a=>{let l=a.slug;c.value=!0,b.Inertia.delete(`/admin/categories/${l}`,{onSuccess:()=>x(),onError:()=>I()})},I=()=>{v.notify({type:"negative",message:_("Something went wrong with category(s) deletion")})},x=()=>{v.notify({type:"positive",message:_("The category(s) have been deleted successfully")})},Y=()=>{b.Inertia.get("/admin/categories/create")},G=a=>u.value.length===0?"":`${u.value.length} record${u.value.length>1?"s":""} selected of ${a}`,J=()=>{b.Inertia.post("/admin/catmassdelete",{data:u.value.map(a=>a.id)},{onStart:()=>c.value=!0,onFinish:()=>u.value.length=0,onSuccess:()=>x(),onError:()=>I()})};return(a,l)=>{const q=n("q-checkbox"),f=n("q-th"),g=n("q-icon"),h=n("q-tooltip"),s=n("q-btn"),$=n("q-td"),K=n("q-inner-loading"),M=n("q-space"),O=n("q-input"),W=n("q-separator"),X=n("q-tr"),Z=n("q-table"),ee=n("q-avatar"),te=n("q-card-section"),ae=n("q-card-actions"),oe=n("q-card"),le=n("q-dialog"),B=re("close-popup");return w(),A(z,null,[r("div",pe,[t(Z,{title:a.$t("Categories"),"row-key":e=>e.id,columns:R,rows:E(V),pagination:m.value,"onUpdate:pagination":l[2]||(l[2]=e=>m.value=e),filter:y.value,onRequest:j,loading:c.value,color:"primary",selected:u.value,"onUpdate:selected":l[3]||(l[3]=e=>u.value=e),selection:"multiple","selected-rows-label":G,flat:"","binary-state-sort":"","rows-per-page-label":a.$t("Records per page"),"rows-per-page-options":[5,10,15,i.paginatedData.total,0],bordered:""},{"header-selection":o(e=>[t(q,{color:"primary","keep-color":"",modelValue:e.selected,"onUpdate:modelValue":D=>e.selected=D,"data-test":"select-checkbox"},null,8,["modelValue","onUpdate:modelValue"])]),"header-cell":o(e=>[t(f,{props:e,class:"text-primary"},{default:o(()=>[P(d(e.col.label),1)]),_:2},1032,["props"])]),"no-data":o(()=>[r("div",me,[t(g,{size:"2em",name:"sentiment_dissatisfied",color:"red"}),r("span",_e,d(a.$t("No data available")),1)])]),"body-cell-catActions":o(e=>[t($,{props:e,"auto-width":""},{default:o(()=>[r("div",be,[t(s,{outline:"",color:"accent",icon:"edit",disable:c.value,onClick:D=>L(e.row),"data-test":"edit-button"},{default:o(()=>[t(h,{delay:1e3,anchor:"bottom middle",self:"center middle"},{default:o(()=>[P(d(a.$t("Edit category")),1)]),_:1})]),_:2},1032,["disable","onClick"]),t(s,{outline:"",color:"red",icon:"delete",disable:c.value,onClick:D=>Q(e.row),"data-test":"delete-button"},{default:o(()=>[t(h,{delay:1e3,anchor:"bottom middle",self:"center middle"},{default:o(()=>[P(d(a.$t("Delete category")),1)]),_:1})]),_:2},1032,["disable","onClick"])])]),_:2},1032,["props"])]),loading:o(()=>[t(K,{showing:"",color:"accent"})]),"body-cell-catIcon":o(e=>[t($,{props:e,"auto-width":""},{default:o(()=>[r("div",{class:"row rounded-borders flex-center color-box",style:ie({background:e.row.color})},[t(g,{name:e.row.icon,color:"white",size:"md"},null,8,["name"])],4)]),_:2},1032,["props"])]),top:o(()=>[r("div",fe,d(a.$t("Categories")),1),t(M),t(O,{"clear-icon":"close",dense:"",debounce:"300","label-color":"primary",modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value=e),"label-slot":"","data-test":"search-input"},{append:o(()=>[t(g,{name:"search",color:"primary"})]),label:o(()=>[r("div",null,d(a.$t("Search")),1)]),_:1},8,["modelValue"]),t(s,{class:"q-ml-md",color:"primary",outline:"",disable:c.value,onClick:H,"data-test":"refresh-button",loading:S.value,icon:"restart_alt"},null,8,["disable","loading"]),t(W,{vertical:"",spaced:"",inset:""}),t(s,{color:"green",unelevated:"",onClick:Y,"data-test":"add-button"},{default:o(()=>[t(g,{left:"",name:"post_add"}),r("div",null,d(a.$t("Add category")),1)]),_:1})]),pagination:o(e=>[e.pagesNumber>2?(w(),N(s,{key:0,icon:"first_page",color:"grey-8",round:"",dense:"",flat:"",disable:e.isFirstPage,onClick:e.firstPage},null,8,["disable","onClick"])):T("",!0),t(s,{icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:e.isFirstPage,onClick:e.prevPage},null,8,["disable","onClick"]),t(s,{icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:e.isLastPage,onClick:e.nextPage},null,8,["disable","onClick"]),e.pagesNumber>2?(w(),N(s,{key:1,icon:"last_page",color:"grey-8",round:"",dense:"",flat:"",disable:e.isLastPage,onClick:e.lastPage},null,8,["disable","onClick"])):T("",!0)]),"bottom-row":o(()=>[t(X,null,{default:o(()=>[t($,{colspan:"100%"},{default:o(()=>[r("div",ve,[t(s,{outline:"",color:"red",disable:c.value||u.value.length==0,onClick:l[1]||(l[1]=e=>k.value=!0),"data-test":"massdelete-button"},{default:o(()=>[r("div",null,d(a.$t("Delete selected")),1)]),_:1},8,["disable"])])]),_:1})]),_:1})]),_:1},8,["title","row-key","rows","pagination","filter","loading","selected","rows-per-page-label","rows-per-page-options"])]),t(le,{modelValue:k.value,"onUpdate:modelValue":l[4]||(l[4]=e=>k.value=e),persistent:""},{default:o(()=>[t(oe,null,{default:o(()=>[t(te,{class:"row items-center bg-red-1"},{default:o(()=>[t(ee,{icon:"front_hand",color:"negative","text-color":"white"}),r("span",ye,d(a.$t("You are going to delete selected categories, aren't you?")),1)]),_:1}),t(ae,{align:"right"},{default:o(()=>[F(t(s,{flat:"",label:a.$t("Cancel"),color:"primary"},null,8,["label"]),[[B]]),F(t(s,{flat:"",label:a.$t("Delete"),color:"negative",onClick:J,"data-test":"massdelete-confirm"},null,8,["label"]),[[B]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});const he=ge(qe,[["__scopeId","data-v-d53abfac"]]),$e=U({__name:"Index",props:{model:null},setup(C){const i=C,v=p(ue);return(V,y)=>(w(),A(z,null,[t(E(ce),{title:"Post categories"}),t(de,{data:v.value},null,8,["data"]),t(he,{paginatedData:i.model.categories,sortingData:i.model.sorting},null,8,["paginatedData","sortingData"])],64))}});export{$e as default};
